<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>元舟 | 去医院就诊</title>
  <link rel="stylesheet" href="./css/styles.css" />
</head>
<body data-scene="hospital">
  <header class="site-header">
    <div class="container header-inner">
      <a class="brand" href="./index.html" aria-label="元舟 首页">
        <img src="./images/商标.png" alt="元舟商标" class="brand-logo" />
        <span class="brand-name">元舟</span>
      </a>
      <nav class="nav">
        <a href="./index.html" class="nav-link">首页</a>
        <a href="./hospital.html" class="nav-link is-active">去医院就诊</a>
      </nav>
    </div>
  </header>

  <div class="container scene-layout">
    <div class="overlay-controls">
      <!-- 视频元素：使用 preload="metadata" 仅加载元数据，加快初始渲染 -->
      <video id="video" controls preload="metadata" controlslist="nofullscreen">
        <source src="./video/movie.mp4" type="video/mp4" />
        您的浏览器不支持 HTML5 视频。
      </video>

      <!-- 问答区域：悬浮在视频上方（JS 动态渲染问题卡片） -->
      <div class="qa qa-overlay" id="qa-container" aria-live="polite" aria-label="视频问答区域">
      </div>
      <!-- 浮动控制：快退/快进 与 自定义全屏（保证问题在全屏时可见） -->
      <div class="floating" aria-label="视频浮动控制">
        <button class="circle-btn" id="jump-back" title="后退15秒">«</button>
        <button class="circle-btn" id="jump-forward" title="前进15秒">»</button>
        <button class="circle-btn" id="btn-fullscreen" title="全屏观看">⛶</button>
      </div>
    </div>

    <!-- 右侧信息侧栏（桌面端显示） -->
    <aside class="scene-aside" aria-label="就诊流程与提示">
      <div class="aside-card">
        <h4>就诊流程</h4>
        <ul class="aside-list">
          <li><span class="dot"></span> 挂号 / 取号</li>
          <li><span class="dot"></span> 候诊 / 叫号</li>
          <li><span class="dot"></span> 医生问诊</li>
          <li><span class="dot"></span> 化验 / 影像</li>
          <li><span class="dot"></span> 取报告 / 复诊</li>
          <li><span class="dot"></span> 取药 / 缴费</li>
        </ul>
      </div>

      <div class="aside-card">
        <h4>温馨提示</h4>
        <div class="tip">带上身份证、医保卡；提前准备零钱或绑定支付；注意各科室位置。</div>
      </div>

      <div class="aside-card">
        <h4>快速入口</h4>
        <div class="tip">
          <a class="badge" href="#" aria-label="常见问题">常见问题</a>
          <a class="badge" href="#" aria-label="急诊指引">急诊指引</a>
          <a class="badge" href="#" aria-label="化验注意">化验注意</a>
        </div>
      </div>
    </aside>
  </div>

  <footer class="site-footer">
    <div class="container footer-inner">© 2025 元舟 · 医疗就诊引导</div>
  </footer>

  <!-- AI 对话窗口（页面底部） -->
  <section class="container chat-wrap" aria-label="AI 对话">
    <div class="chat-header">
      <div class="title">就诊助手 · AI 对话</div>
      <div class="tools">
        <select id="available-model-select" class="select">
          <option value="qwen3-235b-a22b">Qwen 3 235B a22b</option>
          <option value="qwen-turbo-2025-04-28">Qwen Turbo 2025-04-28</option>
          <option value="qwen-plus">Qwen Plus</option>
          <option value="qwen-turbo" selected>Qwen Turbo</option>
        </select>
        <input type="password" id="api-key-input" class="input" placeholder="DashScope API Key（必填）" aria-label="API Key" />
        <button id="btn-save-key" class="btn btn-secondary">保存密钥</button>
      </div>
    </div>

    <div id="chat-messages" class="chat-messages" aria-live="polite">
      <div class="msg ai">
        <div class="bubble">
          你好，我是就诊助手。你可以问：
          <ul>
            <li>怎么挂号、怎么找科室？</li>
            <li>抽血化验要不要空腹？</li>
            <li>检查结果怎么看？需要复诊吗？</li>
          </ul>
        </div>
      </div>
    </div>

    <form id="chat-form" class="chat-input" autocomplete="off">
      <textarea id="chat-text" rows="2" placeholder="输入你的问题，例如：第一次自己去医院需要做哪些准备？" aria-label="聊天输入"></textarea>
      <div class="actions">
        <button type="button" id="btn-web" class="btn btn-secondary">联网搜索</button>
        <button type="submit" id="btn-send" class="btn btn-primary">发送</button>
      </div>
    </form>
  </section>

  <script src="./js/app.js" defer></script>
  <script src="./js/chat.js" defer></script>
</body>
</html>
